# Политика publications_schema

**v1.0** ♻️

## Общее описание

Этот документ фиксирует **канонические правила работы с сущностями публикаций** в экосистеме **DET / DETai**.
В рамках `publications_schema` мы храним документы (посты, цитаты, научные публикации),
а также их таксономию, превью и связи с управляемыми словарями.

Ключевой принцип: **документы не содержат произвольные строки для таксономии**,
они ссылаются на сущности controlled vocabularies по стабильным `id`.
Исключения допускаются только в явно разрешённых переходных полях (например, `keywords_raw`).

---

## Taxonomy документа

Таксономия документа — это **осознанная привязка текста** к:

* концептуальному вектору (rubric),
* уточняющим аспектам (categories),
* эмпирическим маркерам текста (keywords),
* тематическим циклам (cycles).

Используется для навигации, аналитики и роста rubrics/subrubrics.

### Структура taxonomy блока

```json
"taxonomy": {
  "rubric_ids": [],
  "category_ids": [],
  "cycle_ids": ["cycle_123"],
  "keyword_ids": [],
  "keywords_raw": []
}
```

Все поля опциональны, **кроме rubric_ids**.
Для `type = post` также требуется обязательная `category_ids` (ровно одна).

### Общие правила

* Документ **не хранит произвольные строки**, только ссылки на сущности словарей по `id`.
* Rubric выбирается **осознанно**, не автоматически.
* Categories и keywords не подменяют rubrics, а уточняют и отражают текст.

Подробные правила формирования taxonomy — в `post_documents/document_taxonomy_policy.md`.

---

## Rubrics и Subrubrics

### Определения

**Rubric** — верхнеуровневая концептуальная единица, задающая рамку осмысления.
**Subrubric** — дочерняя рубрика, возникающая **в результате накопления и анализа контента**.

Подробное описание того, как формируются rubrics и subrubrics, смотрите в
`post_documents/rubrics_and_subrubrics_policy.md`.
Список рубрик хранится в `post_documents/rubrics.json`.

### Структура описания rubric

Каждая rubric обязана иметь:

* `description` — краткое описание (1–2 предложения),
* `definition.postulate` — основной постулат,
* `definition.conceptual_keys` — гипотезы граней постулата,
* `definition.practical_application` — практическое измерение.

### Принцип появления subrubrics

Subrubrics **не создаются заранее**.
Они появляются, когда:

1. В рамках одной rubric накоплено достаточно документов.
2. Keywords образуют устойчивый кластер.
3. Кластер интерпретируем и согласован с postulate rubric.

### Связь rubrics ↔ keywords ↔ subrubrics

* **Conceptual keys** — нормативные гипотезы.
* **Keywords** — эмпирические данные.
* **Subrubrics** — результат схождения гипотезы и данных.

### Анти-паттерны

❌ Создавать subrubrics заранее «на всякий случай».
❌ Использовать rubrics как теги.
❌ Подменять conceptual keys keywords или наоборот.

---

## Categories

`category_ids` — **поперечные фильтры**, уточняющие аспект рассмотрения.
Категория отвечает на вопрос: **«С какой стороны рассматривается тема?»**

Правила:

* Для `type = post` требуется **ровно одна** category.
* Для остальных типов categories **не обязательны**.
* Categories **не определяют смысл документа**, только уточняют ракурс.

Полный список категорий доступен в `post_documents/categories.json`.
Мини-индекс для быстрого обзора — `post_documents/_indexes_min.md`.

---

## Keywords

Keywords — **фактические смысловые маркеры** текста,
эмпирический слой знаний, который проходит жизненный цикл.

Подробное описание политики keywords смотрите в `post_documents/keywords_policy.md`.
Список ключевых слов хранится в `post_documents/keywords.json`.

### Жизненный цикл keywords

* `candidate` — новые значения, ещё не проверенные.
* `approved` — проверенные и канонические.
* `deprecated` — устаревшие или дублирующие.

### Hybrid-модель в документах

* `keywords_raw` — свободные строки, AI-слой для первичного анализа.
* `keyword_ids` — ссылки на `approved` keywords.

Переходная стратегия:

1. Документ получает `keywords_raw`.
2. Новые значения попадают в `keywords.json` как `candidate`.
3. После ревью переводятся в `approved` и используются как `keyword_ids`.

### Связь keywords с rubrics

Keywords анализируются **внутри документов**, уже отнесённых к rubric,
и служат сигналами для роста rubrics и появления subrubrics.

### Анти-паттерны

❌ Навязывать keywords вручную «под концепцию».
❌ Использовать deprecated keywords в новых документах.
❌ Хранить keywords только строками без controlled vocabulary.

---

## Cycles

`cycle_ids` — связь поста с тематическим циклом.

Правила:

* Если пост входит в цикл, указывается идентификатор цикла.
* В массиве допускается **только один** элемент.
* Для первого поста цикла допускается суффикс: `cycle_123:Post-announcement`.
* Если пост **не входит** в цикл, поле **не указывается**.

Идентификатор цикла — это его **название**, приведённое к каноническому ID.
Список циклов хранится в `post_documents/cycle.json`.

---

## Preview

Preview — краткое описание для Telegram и внешней публикации,
которое должно заинтересовать читателя и привести его к полному тексту.

Принципы:

1. **Краткость и емкость** — 1–2 абзаца (50–150 слов).
2. **Привлекательность** — эмоциональные триггеры, вопросы.
3. **Отражение сути поста** — без искажения содержания.
4. **Использование заголовка** — начинаем превью с заголовка поста.
5. **Тональность** — лёгкая, без излишнего пиара.
6. **Эмодзи** — одна эмодзи категории (из `post_documents/categories.json`).

Полная политика превью — в `post_documents/preview_policies.md`.

---

**Статус документа:** canonical
**Последнее обновление:** 2026-01-15
